```
    Основы операций машины соединений:
        1. соединения (Connection)
        2. результат обработки запроса (Result)
        
    Сессия - фасад (паттерн объединяющего класса) в ORM, соединяющая эти объекты (соединение и результат).
    
    При использовании ORM, машина соединений полностью контролируется более высокой абстракцией - сессией. 
    В современной алхимии сессия является менеджером транзакции и выполнения SQL скриптов, подобно тому, как это 
    происходит с соединением (Connection) в Core. Поэтому хотя эта глава предназначена больше для Core, все ее 
    концепции применимы и для ORM. Разница между соединением (Connection) и сессией (Session) будет показана в конце
    этой главы.
```

# Создание соединения
```
    Единственная цель машины соединений это предоставлять множество соединений к базе данных. 
    
    При работе с Core напрямую, объект соединения (Connection) представляет полностью всё взаимодействие с ней. 
    
    При этом нам бы хотелось всегда ограничивать область использования этого объекта до конкретного контекста и лучший 
    способ это сделать - использовать контекстные менеджеры Python, контролируемые ключевым словом with. 
    
    from sqlalchemy import text
    
    with engine.connect() as conn:
        result = conn.execute(text("select 'hello world'"))
        print(result.all())
    

    по умолчанию транзакции не завершаются автоматически, если вы хотите закрыть ее и выполнить соответствующий SQL
    скрипт, то вам необходимо вызвать Connection.commit(), либо использовать autocommit
    
    Результат выполнения SELECT был также возвращен в качестве объекта, называемого Result, 
    не стоит вытягивать этот объект за пределы контекста соединения.
```

# Сохранение изменений (Commit)
```
    with engine.connect() as conn:
        conn.execute(text("CREATE TABLE some_table (x int, y int)"))
        conn.execute(text("INSERT INTO some_table (x, y) VALUES (:x, :y)"), [{"x": 1, "y": 1}, {"x": 2, "y": 4}])
        conn.commit()
        
    OR
    
    Engine.begin() юудет открывать соединение, подобно Engine.connect(), но и сохранять изменения по выходу из контекста
    
    with engine.begin() as conn:
        conn.execute(text("INSERT INTO some_table (x, y) VALUES (:x, :y)"), [{"x": 6, "y": 8}, {"x": 9, "y": 10}])    
```